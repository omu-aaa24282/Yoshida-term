<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>堺市地図レイヤー表示</title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>

    <script src="./L.KML.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.css" />
    <script src="https://cdn.jsdelivr.net/gh/mwasil/Leaflet.Rainviewer/leaflet.rainviewer.js"></script>
</head>

<body>

    <div id="map" style="height: 80vh;"></div>

    <script>
        // ===== 地図初期化（堺市役所付近） =====
        const map = L.map('map', {
            center: [34.573, 135.483],
            zoom: 13
        });

        // ===== ベースレイヤー =====
        const chiriinLayer = L.tileLayer(
            'https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png',
            { maxZoom: 18, attribution: "地理院地図" }
        ).addTo(map);

        const backgroundLayer = L.tileLayer(
            'https://tile.openstreetmap.org/{z}/{x}/{y}.png',
            { maxZoom: 19, attribution: '&copy; OpenStreetMap contributors' }
        );

        const LayerControl = L.control.layers({
            "地理院地図（標準）": chiriinLayer,
            "OpenStreetMap": backgroundLayer
        }).addTo(map);

        L.control.scale().addTo(map);

        // ===== 1. 行政区画（堺市）を赤色で表示 =====
        fetch("./N03-23_27_230101.geojson") 
            .then(res => res.json())
            .then(data => {
                // N03_003が「堺市」である全区域（各区）を
