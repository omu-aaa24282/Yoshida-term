// ===== 行政区画（堺市）を赤色で表示 =====
fetch("./N03-23_27_230101.geojson") // 画像にある大阪府のファイル名
    .then(res => {
        if (!res.ok) throw new Error('ファイルの読み込みに失敗しました');
        return res.json();
    })
    .then(data => {
        // 堺市（全区）を抽出するためのフィルタリング
        const filteredData = data.features.filter(feature => 
            feature.properties.N03_003 === '堺市' || 
            feature.properties.N03_004 === '堺市'
        );

        if (filteredData.length === 0) {
            console.warn("堺市のデータが見つかりませんでした。属性名を確認してください。");
            return;
        }

        const sakai_area = L.geoJSON(filteredData, {
            style: {
                color: "#FF0000",      // 枠線を赤に変更
                weight: 4,             // 太さを強調
                fillColor: "#FF0000",  // 塗りつぶしを赤に変更
                fillOpacity: 0.3       // 透明度を少し上げる
            }
        }).bindPopup(layer => {
            const p = layer.feature.properties;
            return (p.N03_003 || "") + (p.N03_004 || "");
        });

        map.addLayer(sakai_area);
        LayerControl.addOverlay(sakai_area, "行政区域（堺市・赤）");

        // 堺市全体が見えるようにズーム
        map.fitBounds(sakai_area.getBounds());
    })
    .catch(e => console.error("行政区画データの取得エラー:", e));
